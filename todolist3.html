<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>To-do-list</title>
    <style>

  :root {
    --primary-bg: #1e1e2f;
    --card-bg: #2c2c3e;
    --accent-color: #7c5cff;
    --text-color: #e0e0e0;
    --button-bg: #7c5cff;
    --button-hover: #5a3dbb;
    --input-bg: #3a3a4f;
    --input-focus: #5a3dbb;
    --delete-bg: #ff4d4f;
    --delete-hover: #cc3b3f;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: "Poppins", sans-serif;
  }

  body {
    background-color: var(--primary-bg);
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
    padding: 40px 20px;
  }

  h1 {
    color: var(--accent-color);
    text-align: center;
    margin-bottom: 20px;
    font-size: 2rem;
  }

  .container {
    width: 100%;
    max-width: 500px;
    background-color: var(--card-bg);
    border-radius: 15px;
    padding: 30px 25px;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
  }

  .list-container {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
  }

  input[type="text"] {
    flex: 1;
    padding: 12px 15px;
    border-radius: 10px;
    border: none;
    background-color: var(--input-bg);
    color: var(--text-color);
    font-size: 1rem;
    outline: 2px solid transparent;
    transition: all 0.3s ease;
  }

  input[type="text"]:focus {
    outline: 2px solid var(--input-focus);
    background-color: #44445a;
  }

  .btn {
    padding: 12px 20px;
    border-radius: 10px;
    background-color: var(--button-bg);
    color: #fff;
    border: none;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .btn:hover {
    background-color: var(--button-hover);
    transform: scale(1.05);
  }

  .list-items {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .list-div {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #3a3a5a;
    color: var(--text-color);
    padding: 12px 15px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    font-size: 1.1rem;
    transition: all 0.2s ease;
  }

  .list-div:hover {
    background-color: #4a4a6a;
  }

  .list-div li {
    list-style: none;
    flex: 1;
  }

  .list-div button {
    margin-left: 8px;
    padding: 6px 12px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.2s ease;
  }

  .list-div .edit {
    background-color: var(--accent-color);
    color: #fff;
  }

  .list-div .edit:hover {
    background-color: var(--button-hover);
  }

  .list-div .delete-btn {
    background-color: var(--delete-bg);
    color: #fff;
  }

  .list-div .delete-btn:hover {
    background-color: var(--delete-hover);
  }

  @media (max-width: 480px) {
    .container {
      padding: 20px 15px;
    }

    .list-div {
      flex-direction: column;
      align-items: flex-start;
      gap: 8px;
      font-size: 1rem;
    }

    .list-container {
      flex-direction: column;
      gap: 12px;
    }

    .btn {
      width: 100%;
    }
  }
</style>

  </head>
  <body>
    <div class="container">
      <h1 class="head">To-do-List</h1>
      <div class="list-container">
        <input type="text" placeholder="Add new  task...." />
        <span><button class="btn">Add</button></span>
      </div>
      <section class="list-items"></section>
    </div>
    <script>
      function saveTodo() {
        let tasks = [];
        let li = document.querySelectorAll("li").forEach((lists) => {
          tasks.push(lists.textContent);
        });
        localStorage.setItem("list", JSON.stringify(tasks));
      }

      function loadTo() {
        let tasks = JSON.parse(localStorage.getItem("list"));
        tasks.forEach((task) => {
          let div = document.createElement("div");
          div.setAttribute("class", "list-div");
          div.innerHTML = `<li>${task}</li><span><button class = "edit btn" >Edit</button></span><span><button class ="btn delete-btn" >Delete</button></span>`;
          section.append(div);
        });
      }

      window.addEventListener("load", loadTo);

      let input = document.querySelector("input");
      let btn = document.querySelector(".btn");
      let section = document.querySelector(".list-items");

      btn.addEventListener("click", (e) => {
        e.preventDefault();
        if (input.value === "") {
          return;
        }
        let div = document.createElement("div");
        div.setAttribute("class", "list-div");
        div.innerHTML = `<li>${input.value}</li><span><button class = "edit btn" >Edit</button></span><span><button class ="btn delete-btn" >Delete</button></span>`;
        section.append(div);
        input.value = "";
        saveTodo();
        //    console.log(document.querySelector(".edit").classList);
      });
      //   let editBtn= document.querySelector(".edit")
      //   editBtn.addEventListener("click" , (e)=>{
      //     e.preventDefault();
      //     editBtn.setAttribute('contenteditable' , true)
      //   })
      <!--!Mehnat-->
      //   section.addEventListener("click", (e) => {
      //     e.preventDefault();
      //     if (e.target.classList.contains("edit")) {
      //       section.childNodes[0].childNodes[0].setAttribute(
      //         "contenteditable",
      //         true
      //       );
      //       section.childNodes[0].childNodes[1].innerText = "Save";
      //       section.childNodes[0].childNodes[1].setAttribute('class' , 'btn');

      //       section.childNodes[0].childNodes[1].addEventListener("click", (e) => {
      //         e.preventDefault();
      //         if (
      //           section.childNodes[0].childNodes[1].textContent.includes("Save")
      //         ) {
      //           section.childNodes[0].childNodes[1].textContent = "Edit";
      //           section.childNodes[0].childNodes[0].setAttribute(
      //             "contenteditable",
      //             false
      //         );
      //         section.childNodes[0].childNodes[1].classList.remove('edit')
      //         console.log(section.childNodes[0].childNodes[1].classList);
      //         }
      //       });
      //     }
      //   });

      section.addEventListener("click", (e) => {
        e.preventDefault();
        if (e.target.classList.contains("edit")) {
          let parentDiv = e.target.closest(".list-div");
          let task = parentDiv.querySelector("li");
          if (e.target.innerText === "Edit") {
            task.setAttribute("contenteditable", true);
            e.target.innerText = "Save";
          } else if (e.target.innerText === "Save") {
            task.setAttribute("contenteditable", false);
            e.target.innerText = "Edit";
            saveTodo();
          }

          // console.log(parentDiv);

          // parentDiv.querySelector('li').setAttribute("contenteditable" , true);
        }
        //   let edit =  parentDiv.querySelector('.edit')
        //   edit.innerText='Save';
        //   edit.classList.remove("edit")
      });

      section.addEventListener("click", (e) => {
        e.preventDefault();
        if (e.target.classList.contains("delete-btn")) {
          let parentDiv = e.target.closest(".list-div");
          parentDiv.remove();
          saveTodo();
        }
      });

      //   section.addEventListener("click", (e) => {
      //     if (e.target.classList.contains("edit")) {
      //         console.log(section.childNodes[0].childNodes[1].innerText);
      //         section.childNodes[0].childNodes[0].setAttribute("contenteditable" , true);
      //         section.childNodes[0].childNodes[1].innerHTML=`<span><button class = "edit btn" >Save</button></span>`
      //         section.childNodes[0].childNodes[1].addEventListener("click" , (e)=>{
      //             e.preventDefault();
      //             section.childNodes[0].childNodes[0].setAttribute("contenteditable" , false);

      //         })

      //   section.children[0].setAttribute("contenteditable", true);
      // section.children[1].textContent="Save"
      // if (e.target.textContent==="Edit") {

      //     e.target.innerText==="Save"

      // }

      //   console.log(e);
      //     }
      //   });
    </script>
  </body>
</html>
