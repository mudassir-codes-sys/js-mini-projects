<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>To-do-list</title>
    <style>
      :root {
        --dark-moss-green: #606c38ff;
        --pakistan-green: #283618ff;
        --cornsilk: #fefae0ff;
        --earth-yellow: #dda15eff;
        --tigers-eye: #bc6c25ff;
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        background-color: var(--pakistan-green);
      }
      h1 {
        color: var(--cornsilk);
        margin-top: 4rem;
      }

      input {
        border-radius: 10px;
        outline: 2px solid var(--earth-yellow);
        border: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
        background-color: #e2e2e2;
        outline-offset: 2px;
        padding: 10px 1rem;
        transition: 0.25s;
      }

      input:focus {
        outline-offset: 4px;
        background-color: #fff;
      }
      .container {
        display: flex;
        justify-content: center;
        flex-direction: column;
        align-items: center;
      }
      .list-container {
        margin-top: 1rem;
      }
      .btn {
        margin-left: 1rem;
        padding: 0.5rem 1.5rem;
        border-radius: 1rem;
        background-color: var(--earth-yellow);
        color: black;
        cursor: pointer;
        font-size: large;
        outline: none;
        border: none;
        transition: all 0.2s ease;
      }
      .btn:hover {
        background-color: var(--tigers-eye);
        transform: scale(1.13);
      }
      .list-div {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
        list-style-type: none;
        font-size: 1.5rem;
        background-color: var(--dark-moss-green);
        border: none;
        outline: none;
        margin-bottom: 12px;
        padding: 10px 15px;
        border-radius: 8px;
        min-width: 22vw;
        max-width: max-content;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="head">To-do-List</h1>
      <div class="list-container">
        <input type="text" placeholder="Add new  task...." />
        <span><button class="btn">Add</button></span>
      </div>
      <section class="list-items"></section>
    </div>
    <script>
      function saveTodo() {
        let tasks = [];
        let li = document.querySelectorAll("li").forEach((lists) => {
          tasks.push(lists.textContent);
        });
        localStorage.setItem("list", JSON.stringify(tasks));
      }

      function loadTo() {
        let tasks = JSON.parse(localStorage.getItem("list"));
        tasks.forEach((task) => {
          let div = document.createElement("div");
          div.setAttribute("class", "list-div");
          div.innerHTML = `<li>${task}</li><span><button class = "edit btn" >Edit</button></span><span><button class ="btn delete-btn" >Delete</button></span>`;
          section.append(div);
        });
      }

      window.addEventListener("load", loadTo);

      let input = document.querySelector("input");
      let btn = document.querySelector(".btn");
      let section = document.querySelector(".list-items");

      btn.addEventListener("click", (e) => {
        e.preventDefault();
        if (input.value === "") {
          return;
        }
        let div = document.createElement("div");
        div.setAttribute("class", "list-div");
        div.innerHTML = `<li>${input.value}</li><span><button class = "edit btn" >Edit</button></span><span><button class ="btn delete-btn" >Delete</button></span>`;
        section.append(div);
        input.value = "";
        saveTodo();
        //    console.log(document.querySelector(".edit").classList);
      });
      //   let editBtn= document.querySelector(".edit")
      //   editBtn.addEventListener("click" , (e)=>{
      //     e.preventDefault();
      //     editBtn.setAttribute('contenteditable' , true)
      //   })
      <!--!Mehnat-->
      //   section.addEventListener("click", (e) => {
      //     e.preventDefault();
      //     if (e.target.classList.contains("edit")) {
      //       section.childNodes[0].childNodes[0].setAttribute(
      //         "contenteditable",
      //         true
      //       );
      //       section.childNodes[0].childNodes[1].innerText = "Save";
      //       section.childNodes[0].childNodes[1].setAttribute('class' , 'btn');

      //       section.childNodes[0].childNodes[1].addEventListener("click", (e) => {
      //         e.preventDefault();
      //         if (
      //           section.childNodes[0].childNodes[1].textContent.includes("Save")
      //         ) {
      //           section.childNodes[0].childNodes[1].textContent = "Edit";
      //           section.childNodes[0].childNodes[0].setAttribute(
      //             "contenteditable",
      //             false
      //         );
      //         section.childNodes[0].childNodes[1].classList.remove('edit')
      //         console.log(section.childNodes[0].childNodes[1].classList);
      //         }
      //       });
      //     }
      //   });

      section.addEventListener("click", (e) => {
        e.preventDefault();
        if (e.target.classList.contains("edit")) {
          let parentDiv = e.target.closest(".list-div");
          let task = parentDiv.querySelector("li");
          if (e.target.innerText === "Edit") {
            task.setAttribute("contenteditable", true);
            e.target.innerText = "Save";
          } else if (e.target.innerText === "Save") {
            task.setAttribute("contenteditable", false);
            e.target.innerText = "Edit";
            saveTodo();
          }

          // console.log(parentDiv);

          // parentDiv.querySelector('li').setAttribute("contenteditable" , true);
        }
        //   let edit =  parentDiv.querySelector('.edit')
        //   edit.innerText='Save';
        //   edit.classList.remove("edit")
      });

      section.addEventListener("click", (e) => {
        e.preventDefault();
        if (e.target.classList.contains("delete-btn")) {
          let parentDiv = e.target.closest(".list-div");
          parentDiv.remove();
          saveTodo();
        }
      });

      //   section.addEventListener("click", (e) => {
      //     if (e.target.classList.contains("edit")) {
      //         console.log(section.childNodes[0].childNodes[1].innerText);
      //         section.childNodes[0].childNodes[0].setAttribute("contenteditable" , true);
      //         section.childNodes[0].childNodes[1].innerHTML=`<span><button class = "edit btn" >Save</button></span>`
      //         section.childNodes[0].childNodes[1].addEventListener("click" , (e)=>{
      //             e.preventDefault();
      //             section.childNodes[0].childNodes[0].setAttribute("contenteditable" , false);

      //         })

      //   section.children[0].setAttribute("contenteditable", true);
      // section.children[1].textContent="Save"
      // if (e.target.textContent==="Edit") {

      //     e.target.innerText==="Save"

      // }

      //   console.log(e);
      //     }
      //   });
    </script>
  </body>
</html>
